- clone_repos()
  - clone(current) -> /docs
  - clone(docs-builder) -> /docs-builder


- deploy_branch($target, $branch_name, #pat)
  - clone_repos()
  - cd /docs-builder
  - make build path=/docs
  - push_to_another_repo(
      target_repo_name: $target,
      source_directory: /docs/_build/html,
      branch_name: $branch_name,
      personal_access_token: #pat,
      create_branch_if_not_exists: true
    )

- deploy_main($target, #pat)
  - deploy_branch($target, main, #pat)

- build_pdf($target, #pat)
  - clone_repos()
  - cd /docs-builder
  - make pdf path=/docs
  - release_to_another_repo(
      target_repo_name: $target,
      personal_access_token: #pat,
      source: /docs/_build/latex/*.pdf
    )

- pr_workflow($target, #pat)
  - branch_name = pr-${pr.username}-${pr.id}
  - deploy_branch($target, $branch_name, #pat)
  - comment_on_pr("A preview build has been pushed to https://github.com/envicutor/$target/tree/$branch_name")
